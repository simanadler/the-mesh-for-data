<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Notebook sample - The Mesh for Data</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://ibm.github.io/the-mesh-for-data/favicon.png><link rel=stylesheet href=/the-mesh-for-data/css/style.min.3dea6367d70c56e79acec88bd5217c58299cb81f7dd3f7a663517f3f971ab627.css></head><body class="page page-default-single"><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/the-mesh-for-data/><span>Home</span></a></li><li class=menu-item-docs><a href=/the-mesh-for-data/docs/><span>Docs</span></a></li><li class=menu-item-contribute><a href=/the-mesh-for-data/contribute/><span>Contribute</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=https://ibm.github.io/the-mesh-for-data/><img alt=Logo src=/the-mesh-for-data/images/logo.svg></a></div><div class=logo-mobile><a href=https://ibm.github.io/the-mesh-for-data/><img alt=Logo src=/the-mesh-for-data/images/logo.svg></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/the-mesh-for-data/><span>Home</span></a></li><li class=menu-item-docs><a href=/the-mesh-for-data/docs/><span>Docs</span></a></li><li class=menu-item-contribute><a href=/the-mesh-for-data/contribute/><span>Contribute</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pt-2 pt-md-6 pb-3 pb-md-6"><div class=row><div class="col-12 col-md-3 mb-3"><div class="d-none d-lg-block"><nav id=sidebar aria-label="Section Navigation"><div class=directory><div class=card><button class="header dynamic" id=card4 aria-controls=card4-body>Overview</button><div class=body aria-labelledby=card4 role=region id=card4-body><ul role=tree aria-expanded=true class=leaf-section aria-labelledby=card4><li role=none><a role=treeitem title=() href=https://ibm.github.io/the-mesh-for-data/docs/overview/what-is/>Introduction</a></li><li role=none><a role=treeitem title=() href=https://ibm.github.io/the-mesh-for-data/docs/overview/architecture/>Architecture</a></li><li role=none><a role=treeitem title=() href=https://ibm.github.io/the-mesh-for-data/docs/overview/connectors/>Connectors</a></li><li role=none><a role=treeitem title=() href=https://ibm.github.io/the-mesh-for-data/docs/overview/modules/>Modules</a></li></ul></div></div><div class=card><button class="header dynamic" id=card8 aria-controls=card8-body>Setup</button><div class=body aria-labelledby=card8 role=region id=card8-body><ul role=tree aria-expanded=true class=leaf-section aria-labelledby=card8><li role=none><a role=treeitem href=https://ibm.github.io/the-mesh-for-data/docs/setup/quickstart/>Quick Start</a></li><li role=none><a role=treeitem href=https://ibm.github.io/the-mesh-for-data/docs/setup/install/>Install</a></li><li role=none><a role=treeitem href=https://ibm.github.io/the-mesh-for-data/docs/setup/egeria/install/>ODPi Egeria Install</a></li></ul></div></div><div class=card><button class="header dynamic" id=card13 aria-controls=card13-body>Usage</button><div class="body default" aria-labelledby=card13 role=region id=card13-body><ul role=tree aria-expanded=true class=leaf-section aria-labelledby=card13><li role=none><span role=treeitem class=current>Notebook sample</span></li><li role=none><a role=treeitem href=https://ibm.github.io/the-mesh-for-data/docs/usage/opa/update_policies/>Using OPA</a></li></ul></div></div><div class=card><button class="header dynamic" id=card16 title="Detailed authoritative reference material such as command-line options, configuration options, and API calling parameters." aria-controls=card16-body>Reference</button><div class=body aria-labelledby=card16 role=region id=card16-body><ul role=tree aria-expanded=true aria-labelledby=card16><li role=none><a role=treeitem title=() href=https://ibm.github.io/the-mesh-for-data/docs/reference/roadmap/>Roadmap</a></li><li role=treeitem aria-label="API Reference"><button aria-hidden=true></button><a title=() href=https://ibm.github.io/the-mesh-for-data/docs/reference/api/>API Reference</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem href=https://ibm.github.io/the-mesh-for-data/docs/reference/api/generated/connectors.pb/>connectors</a></li><li role=none><a role=treeitem href=https://ibm.github.io/the-mesh-for-data/docs/reference/api/generated/app/>app.m4d.ibm.com</a></li><li role=none><a role=treeitem href=https://ibm.github.io/the-mesh-for-data/docs/reference/api/generated/motion/>motion.m4d.ibm.com</a></li></ul></li><li role=treeitem aria-label=Components><button aria-hidden=true></button><a title=() href=https://ibm.github.io/the-mesh-for-data/docs/reference/components/>Components</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title=() href=https://ibm.github.io/the-mesh-for-data/docs/reference/components/ddc/>Data Distribution Controller v1.0</a></li></ul></li></ul></div></div></div></nav></div></div><div class="col-12 col-md-9"><nav aria-label=Breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=https://ibm.github.io/the-mesh-for-data/>The Mesh for Data</a></li><li class=breadcrumb-item><a href=https://ibm.github.io/the-mesh-for-data/docs/>Docs</a></li><li class=breadcrumb-item><a href=https://ibm.github.io/the-mesh-for-data/docs/usage/>Usage</a></li><li class=breadcrumb-item>Notebook sample</li></ol></nav><h1 class=title>Notebook sample</h1><div class="content anchor-link-enabled"><div class="alert alert-warning" role=alert><i class="fas fa-exclamation-triangle" style=padding-right:1em aria-hidden=true></i>Incomplete. Show usage of OPA, usage of Egeria, Starting the notebook, Writing code; Also should be a KubeFlow Notebook sample.</div><p>This guides describes sample usage of The Mesh for Data by describing a sample Jupyter notebook application.
It describes how you, as a data scientist, can use a Jupyter notebook for building a fraud detection model using a
data asset you find in the data catalog.</p><h1 id=deploy-the-application>Deploy the application</h1><div class="alert alert-info" role=alert><i class="fas fa-info-circle" style=padding-right:1em aria-hidden=true></i>Kubernetes applications can be deployed using any standard deployment tool, from plane <code>kubectl apply</code> to <a href=https://razee.io/>Razee</a>. The Mesh for Data only requires a common label.</div><p>You have a Kubernetes namespace (OpenShift project) that you can work in, called <code>fraud-detection</code>.</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>kubectl create namespace fraud-detection
</code></pre></div><p>Deploy the Jupyter notebook workload by applying a yaml:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>kind</span><span class=p>:</span><span class=w> </span>Deployment<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apps/v1<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>notebook-deployment<span class=w>
</span><span class=w>  </span><span class=k>labels</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>app</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span><span class=w>  </span><span class=k>selector</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>matchLabels</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>app</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w>  </span><span class=k>template</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>labels</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>app</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w>      </span><span class=k>annotations</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>sidecar.istio.io/inject</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span><span class=w>    </span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>containers</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>notebook<span class=w>
</span><span class=w>          </span><span class=k>image</span><span class=p>:</span><span class=w> </span>jupyter/datascience-notebook<span class=w>
</span><span class=w>          </span><span class=k>ports</span><span class=p>:</span><span class=w>
</span><span class=w>            </span>- <span class=k>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>8888</span><span class=w>
</span><span class=w>              </span><span class=k>protocol</span><span class=p>:</span><span class=w> </span>TCP<span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Service<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>v1<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>notebook-service<span class=w>
</span><span class=w>  </span><span class=k>labels</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>app</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>ports</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=k>protocol</span><span class=p>:</span><span class=w> </span>TCP<span class=w>
</span><span class=w>      </span><span class=k>name</span><span class=p>:</span><span class=w> </span>http<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span><span class=w>      </span><span class=k>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>8888</span><span class=w>
</span><span class=w>  </span><span class=k>selector</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>app</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w>  </span><span class=k>type</span><span class=p>:</span><span class=w> </span>ClusterIP<span class=w>
</span></code></pre></div><h1 id=register-with-hahahugoshortcode-s3-hbhb>Register with The Mesh for Data</h1><p>Your notebook don&rsquo;t have data access credentials and would not be able to operate without registering the Application to the The Mesh for Data control plane.</p><p>Register your application by creating a <code>M4DApplication</code> resource that provides metadata about your application:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>app.m4d.ibm.com/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>M4DApplication<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w>  </span><span class=k>labels</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>app</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>selector</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>matchLabels</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>app</span><span class=p>:</span><span class=w> </span>my-notebook-app<span class=w>
</span><span class=w>  </span><span class=k>appInfo</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>purpose</span><span class=p>:</span><span class=w> </span>fraud-detection<span class=w>
</span><span class=w>    </span><span class=k>processingGeography</span><span class=p>:</span><span class=w> </span>US<span class=w>
</span><span class=w>    </span><span class=k>role</span><span class=p>:</span><span class=w> </span>Security<span class=w>
</span><span class=w>  </span><span class=k>data</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=k>catalogID</span><span class=p>:</span><span class=w> </span>87ffdca3-8b5d-4f77-99f9-0cb1fba1f73f<span class=w>
</span><span class=w>      </span><span class=k>dataSetID</span><span class=p>:</span><span class=w> </span>01c6f0f0-9ffe-4ccc-ac07<span class=m>-409523755e72</span><span class=w> 
</span><span class=w>      </span><span class=k>ifDetails</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>protocol</span><span class=p>:</span><span class=w> </span>S3<span class=w>
</span><span class=w>        </span><span class=k>dataformat</span><span class=p>:</span><span class=w> </span>parquet<span class=w>
</span></code></pre></div><p>The definition above contains <code>appInfo</code> with declared attributes of your application. It also contains a <code>data</code> section with a list of datasets from the catalog. For each dataset you also specify the interface you want to use in order to consume the asset.</p></div></div></div></div></div></div><div class=sub-footer><div class=container><div class=row><div class=col-12><div class=sub-footer-inner><ul><li class=fineprint><a href=https://ibm.github.io/the-mesh-for-data/legal>fine print</a></li></ul></div></div></div></div></div><script type=text/javascript src=/the-mesh-for-data/js/scripts.min.743d9793278e564da4ce594a32a52b65cbd1df69adbfc11858d0093e9a230182.js></script></body></html>